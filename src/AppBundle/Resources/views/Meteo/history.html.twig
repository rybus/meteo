{% extends '::base.html.twig' %}

{%  block title %}{{  sensor.name }}{%  endblock %}

{% block headjavascripts %}
    <script>
        $(document).ready(function(){
            $.getJSON({
                url: "measures/{{ sensor.id }}",
                dataType: 'json',
                success: renderGraph
            });

            function renderGraph(dp) {
                var chart = new CanvasJS.Chart("chartContainer", {
                    theme: "light2", // "light1", "light2", "dark1", "dark2"
                    animationEnabled: true,
                    zoomEnabled: true,
                    title: {
                        text: "{{  sensor.label }}"
                    },
                    axisX:{
                        valueFormatString: "DD/MM/YY HH:mm"
                    },
                    data: [{
                        type: "spline",
                        xValueType: "dateTime",
                        dataPoints: dp
                    }]
                });

                chart.render();
            }
        });
    </script>
{%  endblock %}

{%  block body %}

    <div id="chartContainer" style="height: 370px; width: 100%;"></div>

{% endblock %}

{% block javascripts %}
    {{  parent() }}
    <script src="{{ asset('js/canvasjs.min.js') }}"></script>
{% endblock %}